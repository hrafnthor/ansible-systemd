{
    "title": "pipx",
    "description": "schema for systemd configuration",
    "type": "object",
    "properties":
    {
        "units":
        {
            "type": "array",
            "items":
            {
                "type": "object",
                "properties":
                {
                    "remove":
                    {
                        "description": "Indicates if the unit file present at the path defined in variable 'dest' with the name as defined in 'name' should be removed.",
                        "type": "boolean"
                    },
                    "src":
                    {
                        "description": "The source path for the unit file being configured.",
                        "$ref": "#/definitions/non-empty-string"
                    },
                    "vars":
                    {
                        "description": "Dictionary of variables to pass on to the templating task.",
                        "type": "object"
                    },
                    "dest":
                    {
                        "description": "The directory path to where the unit file should be placed. If omitted, the default value is used.",
                        "$ref": "#/definitions/non-empty-string"
                    },
                    "owner":
                    {
                        "description": "The owner of the unit file",
                        "$ref": "#/definitions/non-empty-string"
                    },
                    "group":
                    {
                        "description": "The group owning the unit file",
                        "$ref": "#/definitions/non-empty-string"
                    },
                    "mode":
                    {
                        "description": "The access mode of the unit file",
                        "$ref": "#/definitions/non-empty-string"
                    },
                    "name":
                    {
                        "description": "The name to give the unit file. This should be without the suffix as it will be spliced automatically based on the 'kind' selection.",
                        "$ref": "#/definitions/non-empty-string"
                    },
                    "enabled":
                    {
                        "description": "Indicates if the unit should be made to start at system boot up.",
                        "type": "boolean"
                    },
                    "state":
                    {
                        "description": "The state that the unit should be set to",
                        "type": "string",
                        "enum":
                        [
                            "stopped",
                            "started",
                            "restarted",
                            "reloaded"
                        ]
                    },
                    "kind":
                    {
                        "type": "string",
                        "enum":
                        [
                            "service",
                            "socket",
                            "device",
                            "mount",
                            "automount",
                            "swap",
                            "target",
                            "path",
                            "timer",
                            "snapshot",
                            "slice",
                            "scope"
                        ]
                    }
                },
                "required":
                [
                    "name",
                    "kind"
                ],
                "if":
                {
                    "properties":
                    {
                        "remove":
                        {
                            "const": false
                        }
                    }
                },
                "then":
                {
                    "required":
                    [
                        "src"
                    ]
                },
                "else":
                {}
            }
        }
    },
    "definitions":
    {
        "non-empty-string":
        {
            "type": "string",
            "minLength": 1
        },
        "non-empty-string-array":
        {
            "type": "array",
            "minItems": 1,
            "items":
            {
                "$ref": "#/definitions/non-empty-string"
            }
        }
    }
}